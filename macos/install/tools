#!/bin/bash

# Install dotfile tools.
# Pass the destination dir as an optional argument. Installs to $HOME by default.
#
# install/tools [DEST:$HOME]
#

set -e

DEST=$(readlink -f ${1:-$HOME})

DOTFILES=$(cd "$(dirname "$BASH_SOURCE")/.."; pwd -P)

function install_scripts {
    export DEST
    export DOTFILES

    # Keep find and execute loops separate so the find pipe doesn't break
    # reading user input in scripts.
    local -a scripts=()
    while IFS= read -r script; do
        scripts+=("$script")
    done < <(find -H "$DOTFILES/tools" -name "[0-9][0-9]-*.sh" | sort -n)

    for script in "${scripts[@]}"; do
        echo ''
        echo Installing "$script"
        bash -x "$script"
    done
}

install_scripts
